{"ast":null,"code":"import React,{useState}from'react';import{Link,useHistory}from'react-router-dom';import{useSelector,useDispatch}from\"react-redux\";import Swal from'sweetalert2';import{auth,db}from'../../firebaseConfig';import{register}from'../../app/slices/user';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LoginArea=()=>{let dispatch=useDispatch();const history=useHistory();let status=useSelector(state=>state.user.status);let storedUser=useSelector(state=>state.user.user);const[email,setEmail]=useState('');const[pass,setPass]=useState('');const[loading,setLoading]=useState(false);// Login\nconst login=async()=>{if(status){Swal.fire({icon:'question',title:'Sayın '+storedUser.name,html:'Zaten giriş yapmışsınız <br />'+'<b>Hesabım</b> sayfasına gidebilir veya <b>Alışveriş</b> yapabilirsiniz'}).then(result=>{if(result.isConfirmed){history.push('/my-account');}});}else{if(!email||!pass){Swal.fire({icon:'warning',title:'Eksik Bilgi',text:'Lütfen email ve şifre girin'});return;}setLoading(true);try{const userCredential=await auth.signInWithEmailAndPassword(email,pass);const uid=userCredential.user.uid;// Firestore'dan kullanıcı bilgilerini al\nlet nameToUse='Müşteri';try{const docRef=db.collection('users').doc(uid);const docSnap=await docRef.get();if(docSnap.exists){const data=docSnap.data();nameToUse=data.name||userCredential.user.displayName||'Müşteri';}else{nameToUse=userCredential.user.displayName||'Müşteri';}}catch(e){console.warn('Firestore read failed:',e);nameToUse=userCredential.user.displayName||'Müşteri';}// Redux store'u güncelle\ndispatch(register({user:nameToUse,email:email,pass:pass}));setLoading(false);Swal.fire({icon:'success',title:'Giriş Başarılı!',text:'Hoş geldiniz '+nameToUse,timer:1500,showConfirmButton:false});setTimeout(()=>{history.push(\"/\");},100);}catch(error){setLoading(false);console.error('Login error:',error);let errorMessage='Bir hata oluştu. Lütfen tekrar deneyin.';if(error.code==='auth/user-not-found'){errorMessage='Bu email adresi ile kayıtlı kullanıcı bulunamadı.';}else if(error.code==='auth/wrong-password'){errorMessage='Şifre yanlış.';}else if(error.code==='auth/invalid-email'){errorMessage='Geçersiz email adresi.';}else if(error.message){errorMessage=error.message;}Swal.fire({icon:'error',title:'Giriş Başarısız',text:errorMessage});}}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"section\",{id:\"login_area\",className:\"ptb-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 offset-lg-3 col-md-12 col-sm-12 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"account_form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Giri\\u015F Yap\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();login();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"default-form-box\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Email\",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",required:true,value:email,onChange:e=>setEmail(e.currentTarget.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"default-form-box\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u015Eifre\",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",required:true,value:pass,onChange:e=>setPass(e.currentTarget.value),minLength:\"6\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login_submit\",children:/*#__PURE__*/_jsx(\"button\",{className:\"theme-btn-one btn-black-overlay btn_md\",type:\"submit\",disabled:loading,children:loading?'Giriş yapılıyor...':'Giriş Yap'})}),/*#__PURE__*/_jsx(\"div\",{className:\"remember_area\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-check-input\",id:\"materialUnchecked\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"materialUnchecked\",children:\"Beni Hat\\u0131rla\"})]})}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"active\",children:\"Hesab\\u0131n\\u0131z yok mu? Kay\\u0131t Ol\"})]})]})})})})})});};export default LoginArea;","map":{"version":3,"names":["React","useState","Link","useHistory","useSelector","useDispatch","Swal","auth","db","register","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginArea","dispatch","history","status","state","user","storedUser","email","setEmail","pass","setPass","loading","setLoading","login","fire","icon","title","name","html","then","result","isConfirmed","push","text","userCredential","signInWithEmailAndPassword","uid","nameToUse","docRef","collection","doc","docSnap","get","exists","data","displayName","e","console","warn","timer","showConfirmButton","setTimeout","error","errorMessage","code","message","children","id","className","onSubmit","preventDefault","type","required","value","onChange","currentTarget","minLength","disabled","htmlFor","to"],"sources":["/Users/mustafabozyel/Github-Desktop/malikanelectronics/src/component/Login/index.js"],"sourcesContent":["import React, { useState } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Swal from 'sweetalert2';\nimport { auth, db } from '../../firebaseConfig'\nimport { register } from '../../app/slices/user'\n\nconst LoginArea = () => {\n    let dispatch = useDispatch();\n    const history = useHistory()\n\n    let status = useSelector((state) => state.user.status);\n    let storedUser = useSelector((state) => state.user.user);\n    const [email, setEmail] = useState('')\n    const [pass, setPass] = useState('')\n    const [loading, setLoading] = useState(false)\n\n    // Login\n    const login = async () => {\n        if(status){\n            Swal.fire({\n                icon: 'question',\n                title: 'Sayın ' + storedUser.name,\n                html:\n                    'Zaten giriş yapmışsınız <br />' +\n                    '<b>Hesabım</b> sayfasına gidebilir veya <b>Alışveriş</b> yapabilirsiniz',\n            }).then((result) => {\n                if(result.isConfirmed) {\n                  history.push('/my-account')\n                }\n              });\n        }else{\n            if(!email || !pass){\n                Swal.fire({\n                    icon: 'warning',\n                    title: 'Eksik Bilgi',\n                    text: 'Lütfen email ve şifre girin'\n                })\n                return\n            }\n\n            setLoading(true)\n            try{\n                const userCredential = await auth.signInWithEmailAndPassword(email, pass)\n                const uid = userCredential.user.uid\n\n                // Firestore'dan kullanıcı bilgilerini al\n                let nameToUse = 'Müşteri'\n                try {\n                    const docRef = db.collection('users').doc(uid)\n                    const docSnap = await docRef.get()\n                    if(docSnap.exists){\n                        const data = docSnap.data()\n                        nameToUse = data.name || userCredential.user.displayName || 'Müşteri'\n                    } else {\n                        nameToUse = userCredential.user.displayName || 'Müşteri'\n                    }\n                } catch(e) {\n                    console.warn('Firestore read failed:', e)\n                    nameToUse = userCredential.user.displayName || 'Müşteri'\n                }\n\n                // Redux store'u güncelle\n                dispatch(register({ user: nameToUse, email: email, pass: pass }))\n                setLoading(false)\n\n                Swal.fire({\n                    icon: 'success',\n                    title: 'Giriş Başarılı!',\n                    text: 'Hoş geldiniz ' + nameToUse,\n                    timer: 1500,\n                    showConfirmButton: false\n                })\n                \n                setTimeout(() => {\n                    history.push(\"/\");\n                }, 100)\n            } catch(error){\n                setLoading(false)\n                console.error('Login error:', error)\n                let errorMessage = 'Bir hata oluştu. Lütfen tekrar deneyin.'\n                \n                if(error.code === 'auth/user-not-found'){\n                    errorMessage = 'Bu email adresi ile kayıtlı kullanıcı bulunamadı.'\n                } else if(error.code === 'auth/wrong-password'){\n                    errorMessage = 'Şifre yanlış.'\n                } else if(error.code === 'auth/invalid-email'){\n                    errorMessage = 'Geçersiz email adresi.'\n                } else if(error.message){\n                    errorMessage = error.message\n                }\n\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Giriş Başarısız',\n                    text: errorMessage\n                })\n            }\n        }\n    }\n\n    return (\n        <>\n            <section id=\"login_area\" className=\"ptb-100\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-lg-6 offset-lg-3 col-md-12 col-sm-12 col-12\">\n                            <div className=\"account_form\">\n                                <h3>Giriş Yap</h3>\n                                <form onSubmit={(e)=>{e.preventDefault();login()}}>\n                                    <div className=\"default-form-box\">\n                                        <label>Email<span className=\"text-danger\">*</span></label>\n                                        <input type=\"email\" className=\"form-control\" required value={email} onChange={e => setEmail(e.currentTarget.value)} />\n                                    </div>\n                                    <div className=\"default-form-box\">\n                                        <label>Şifre<span className=\"text-danger\">*</span></label>\n                                        <input type=\"password\" className=\"form-control\" required value={pass} onChange={e => setPass(e.currentTarget.value)} minLength=\"6\"/>\n                                    </div>\n                                    <div className=\"login_submit\">\n                                        <button \n                                            className=\"theme-btn-one btn-black-overlay btn_md\" \n                                            type=\"submit\"\n                                            disabled={loading}\n                                        >\n                                            {loading ? 'Giriş yapılıyor...' : 'Giriş Yap'}\n                                        </button>\n                                    </div>\n                                    <div className=\"remember_area\">\n                                        <div className=\"form-check\">\n                                            <input type=\"checkbox\" className=\"form-check-input\" id=\"materialUnchecked\"/>\n                                            <label className=\"form-check-label\" htmlFor=\"materialUnchecked\">Beni Hatırla</label>\n                                        </div>\n                                    </div>\n                                    <Link to=\"/register\" className=\"active\">Hesabınız yok mu? Kayıt Ol</Link>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        </>\n    )\n}\n\nexport default LoginArea\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}