{"ast":null,"code":"import React,{useState}from'react';import{Link,useHistory}from'react-router-dom';import{useSelector}from\"react-redux\";import Swal from'sweetalert2';import firebase from'firebase/app';import{auth,db}from'../../firebaseConfig';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RegisterArea=()=>{const history=useHistory();const[user,setUserName]=useState('');const[email,setEmail]=useState('');const[pass,setPass]=useState('');const[loading,setLoading]=useState(false);let status=useSelector(state=>state.user.status);let userData=useSelector(state=>state.user.user);// Register\nconst register=async()=>{if(status){Swal.fire({icon:'question',title:'Sayın '+userData.name,html:'Zaten kayıtlısınız <br />'+'<b>Hesabım</b> sayfasına gidebilir veya <b>Alışveriş</b> yapabilirsiniz'}).then(result=>{if(result.isConfirmed){history.push('/my-account');}});}else{if(!email||!pass||!user){Swal.fire({icon:'warning',title:'Eksik Bilgi',text:'Lütfen tüm alanları doldurun'});return;}setLoading(true);try{// Firebase auth kullanıcı oluştur\nconst userCredential=await auth.createUserWithEmailAndPassword(email,pass);const uid=userCredential.user.uid;// Display name güncelle\ntry{await userCredential.user.updateProfile({displayName:user});}catch(e){console.warn('Display name update failed:',e);}// Firestore'a kullanıcı profili kaydet\ntry{await db.collection('users').doc(uid).set({name:user,email:email,createdAt:firebase.firestore.FieldValue.serverTimestamp(),uid:uid});}catch(e){console.warn('Firestore write failed:',e);}// Firebase Auth'dan çıkış yap - kullanıcı login sayfasına gidip manuel giriş yapmalı\ntry{await auth.signOut();}catch(e){console.warn('Firebase signOut failed:',e);}setLoading(false);Swal.fire({icon:'success',title:'Kayıt Başarılı!',text:'Hesabınız oluşturuldu. Giriş sayfasına yönlendiriliyorsunuz...',timer:1500,showConfirmButton:false});setTimeout(()=>{history.push(\"/login\");},100);}catch(error){console.error('Registration error:',error);setLoading(false);let errorMessage='Bir hata oluştu. Lütfen tekrar deneyin.';if(error.code==='auth/email-already-in-use'){errorMessage='Bu email adresi zaten kullanılıyor.';}else if(error.code==='auth/weak-password'){errorMessage='Şifre çok zayıf. En az 6 karakter olmalıdır.';}else if(error.code==='auth/invalid-email'){errorMessage='Geçersiz email adresi.';}else if(error.message){errorMessage=error.message;}Swal.fire({icon:'error',title:'Kayıt Başarısız',text:errorMessage});}}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"section\",{id:\"login_area\",className:\"ptb-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 offset-lg-3 col-md-12 col-sm-12 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"account_form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Kay\\u0131t Ol\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();register();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"default-form-box\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Kullan\\u0131c\\u0131 Ad\\u0131\",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:user,onChange:e=>setUserName(e.currentTarget.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"default-form-box\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Email\",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",value:email,onChange:e=>setEmail(e.currentTarget.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"default-form-box\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u015Eifre\",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",value:pass,onChange:e=>setPass(e.currentTarget.value),required:true,minLength:\"6\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login_submit\",children:/*#__PURE__*/_jsx(\"button\",{className:\"theme-btn-one btn-black-overlay btn_md\",type:\"submit\",disabled:loading,children:loading?'Kaydediliyor...':'Kayıt Ol'})}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"active\",children:\"Zaten hesab\\u0131n\\u0131z var m\\u0131? Giri\\u015F Yap\"})]})]})})})})})});};export default RegisterArea;","map":{"version":3,"names":["React","useState","Link","useHistory","useSelector","Swal","firebase","auth","db","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RegisterArea","history","user","setUserName","email","setEmail","pass","setPass","loading","setLoading","status","state","userData","register","fire","icon","title","name","html","then","result","isConfirmed","push","text","userCredential","createUserWithEmailAndPassword","uid","updateProfile","displayName","e","console","warn","collection","doc","set","createdAt","firestore","FieldValue","serverTimestamp","signOut","timer","showConfirmButton","setTimeout","error","errorMessage","code","message","children","id","className","onSubmit","preventDefault","type","value","onChange","currentTarget","required","minLength","disabled","to"],"sources":["/Users/mustafabozyel/Github-Desktop/malikanelectronics/src/component/Register/index.js"],"sourcesContent":["import React, {useState} from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport { useSelector } from \"react-redux\";\nimport Swal from 'sweetalert2';\nimport firebase from 'firebase/app'\nimport { auth, db } from '../../firebaseConfig'\n\nconst RegisterArea = () => {\n    const history = useHistory()\n    const [user, setUserName] = useState('')\n    const [email, setEmail] = useState('')\n    const [pass, setPass] = useState('')\n    const [loading, setLoading] = useState(false)\n\n    let status = useSelector((state) => state.user.status);\n    let userData = useSelector((state) => state.user.user);\n\n    // Register\n    const register = async () => {\n        if(status){\n            Swal.fire({\n                icon: 'question',\n                title: 'Sayın ' + userData.name,\n                html:\n                    'Zaten kayıtlısınız <br />' +\n                    '<b>Hesabım</b> sayfasına gidebilir veya <b>Alışveriş</b> yapabilirsiniz',\n            }).then((result) => {\n                if(result.isConfirmed) {\n                  history.push('/my-account')\n                }\n              });\n        }else{\n            if(!email || !pass || !user){\n                Swal.fire({\n                    icon: 'warning',\n                    title: 'Eksik Bilgi',\n                    text: 'Lütfen tüm alanları doldurun'\n                })\n                return\n            }\n\n            setLoading(true)\n            try{\n                // Firebase auth kullanıcı oluştur\n                const userCredential = await auth.createUserWithEmailAndPassword(email, pass)\n                const uid = userCredential.user.uid\n\n                // Display name güncelle\n                try {\n                    await userCredential.user.updateProfile({ displayName: user })\n                } catch(e) {\n                    console.warn('Display name update failed:', e)\n                }\n\n                // Firestore'a kullanıcı profili kaydet\n                try {\n                    await db.collection('users').doc(uid).set({\n                        name: user,\n                        email: email,\n                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n                        uid: uid\n                    })\n                } catch(e) {\n                    console.warn('Firestore write failed:', e)\n                }\n\n                // Firebase Auth'dan çıkış yap - kullanıcı login sayfasına gidip manuel giriş yapmalı\n                try {\n                    await auth.signOut()\n                } catch(e) {\n                    console.warn('Firebase signOut failed:', e)\n                }\n\n                setLoading(false)\n            \n            Swal.fire({\n                icon: 'success',\n                    title: 'Kayıt Başarılı!',\n                    text: 'Hesabınız oluşturuldu. Giriş sayfasına yönlendiriliyorsunuz...',\n                    timer: 1500,\n                    showConfirmButton: false\n                })\n                \n                setTimeout(() => {\n                    history.push(\"/login\");\n                }, 100)\n                \n            } catch(error){\n                console.error('Registration error:', error)\n                setLoading(false)\n                \n                let errorMessage = 'Bir hata oluştu. Lütfen tekrar deneyin.'\n                if(error.code === 'auth/email-already-in-use'){\n                    errorMessage = 'Bu email adresi zaten kullanılıyor.'\n                } else if(error.code === 'auth/weak-password'){\n                    errorMessage = 'Şifre çok zayıf. En az 6 karakter olmalıdır.'\n                } else if(error.code === 'auth/invalid-email'){\n                    errorMessage = 'Geçersiz email adresi.'\n                } else if(error.message){\n                    errorMessage = error.message\n                }\n\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Kayıt Başarısız',\n                    text: errorMessage\n                })\n            }\n        }\n    }\n    return (\n        <>\n            <section id=\"login_area\" className=\"ptb-100\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-lg-6 offset-lg-3 col-md-12 col-sm-12 col-12\">\n                            <div className=\"account_form\">\n                                <h3>Kayıt Ol</h3>\n                                <form onSubmit={(e)=>{e.preventDefault();register()}}>\n                                    <div className=\"default-form-box\">\n                                        <label>Kullanıcı Adı<span className=\"text-danger\">*</span></label>\n                                        <input type=\"text\" className=\"form-control\" value={user} onChange={e => setUserName(e.currentTarget.value)} required/>\n                                    </div>\n                                    <div className=\"default-form-box\">\n                                        <label>Email<span className=\"text-danger\">*</span></label>\n                                        <input type=\"email\" className=\"form-control\" value={email} onChange={e => setEmail(e.currentTarget.value)} required/>\n                                    </div>\n                                    <div className=\"default-form-box\">\n                                        <label>Şifre<span className=\"text-danger\">*</span></label>\n                                        <input type=\"password\" className=\"form-control\" value={pass} onChange={e => setPass(e.currentTarget.value)} required minLength=\"6\"/>\n                                    </div>\n                                    <div className=\"login_submit\">\n                                        <button \n                                            className=\"theme-btn-one btn-black-overlay btn_md\" \n                                            type=\"submit\"\n                                            disabled={loading}\n                                        >\n                                            {loading ? 'Kaydediliyor...' : 'Kayıt Ol'}\n                                        </button>\n                                    </div>\n                                    <Link to=\"/login\" className=\"active\">Zaten hesabınız var mı? Giriş Yap</Link>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        </>\n    )\n}\n\nexport default RegisterArea\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}