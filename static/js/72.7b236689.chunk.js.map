{"version":3,"sources":["component/Register/index.js","page/register.js"],"names":["RegisterArea","history","useHistory","user","setUserName","useState","email","setEmail","pass","setPass","loading","setLoading","status","useSelector","state","userData","_jsx","_Fragment","children","id","className","_jsxs","onSubmit","e","preventDefault","async","Swal","fire","icon","title","name","html","then","result","isConfirmed","push","text","userCredential","auth","createUserWithEmailAndPassword","uid","updateProfile","displayName","console","warn","db","collection","doc","set","createdAt","firebase","firestore","FieldValue","serverTimestamp","signOut","timer","showConfirmButton","setTimeout","error","errorMessage","code","message","register","type","value","onChange","currentTarget","required","minLength","disabled","Link","to","Register","Header","Footer"],"mappings":"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","file":"static/js/72.7b236689.chunk.js","sourcesContent":["import React, {useState} from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport { useSelector } from \"react-redux\";\nimport Swal from 'sweetalert2';\nimport firebase from 'firebase/app'\nimport { auth, db } from '../../firebaseConfig'\n\nconst RegisterArea = () => {\n    const history = useHistory()\n    const [user, setUserName] = useState('')\n    const [email, setEmail] = useState('')\n    const [pass, setPass] = useState('')\n    const [loading, setLoading] = useState(false)\n\n    let status = useSelector((state) => state.user.status);\n    let userData = useSelector((state) => state.user.user);\n\n    // Register\n    const register = async () => {\n        if(status){\n            Swal.fire({\n                icon: 'question',\n                title: 'Sayın ' + userData.name,\n                html:\n                    'Zaten kayıtlısınız <br />' +\n                    '<b>Hesabım</b> sayfasına gidebilir veya <b>Alışveriş</b> yapabilirsiniz',\n            }).then((result) => {\n                if(result.isConfirmed) {\n                  history.push('/my-account')\n                }\n              });\n        }else{\n            if(!email || !pass || !user){\n                Swal.fire({\n                    icon: 'warning',\n                    title: 'Eksik Bilgi',\n                    text: 'Lütfen tüm alanları doldurun'\n                })\n                return\n            }\n\n            setLoading(true)\n            try{\n                // Firebase auth kullanıcı oluştur\n                const userCredential = await auth.createUserWithEmailAndPassword(email, pass)\n                const uid = userCredential.user.uid\n\n                // Display name güncelle\n                try {\n                    await userCredential.user.updateProfile({ displayName: user })\n                } catch(e) {\n                    console.warn('Display name update failed:', e)\n                }\n\n                // Firestore'a kullanıcı profili kaydet\n                try {\n                    await db.collection('users').doc(uid).set({\n                        name: user,\n                        email: email,\n                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n                        uid: uid\n                    })\n                } catch(e) {\n                    console.warn('Firestore write failed:', e)\n                }\n\n                // Firebase Auth'dan çıkış yap - kullanıcı login sayfasına gidip manuel giriş yapmalı\n                try {\n                    await auth.signOut()\n                } catch(e) {\n                    console.warn('Firebase signOut failed:', e)\n                }\n\n                setLoading(false)\n            \n            Swal.fire({\n                icon: 'success',\n                    title: 'Kayıt Başarılı!',\n                    text: 'Hesabınız oluşturuldu. Giriş sayfasına yönlendiriliyorsunuz...',\n                    timer: 1500,\n                    showConfirmButton: false\n                })\n                \n                setTimeout(() => {\n                    history.push(\"/login\");\n                }, 100)\n                \n            } catch(error){\n                console.error('Registration error:', error)\n                setLoading(false)\n                \n                let errorMessage = 'Bir hata oluştu. Lütfen tekrar deneyin.'\n                if(error.code === 'auth/email-already-in-use'){\n                    errorMessage = 'Bu email adresi zaten kullanılıyor.'\n                } else if(error.code === 'auth/weak-password'){\n                    errorMessage = 'Şifre çok zayıf. En az 6 karakter olmalıdır.'\n                } else if(error.code === 'auth/invalid-email'){\n                    errorMessage = 'Geçersiz email adresi.'\n                } else if(error.message){\n                    errorMessage = error.message\n                }\n\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Kayıt Başarısız',\n                    text: errorMessage\n                })\n            }\n        }\n    }\n    return (\n        <>\n            <section id=\"login_area\" className=\"ptb-100\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-lg-6 offset-lg-3 col-md-12 col-sm-12 col-12\">\n                            <div className=\"account_form\">\n                                <h3>Kayıt Ol</h3>\n                                <form onSubmit={(e)=>{e.preventDefault();register()}}>\n                                    <div className=\"default-form-box\">\n                                        <label>Kullanıcı Adı<span className=\"text-danger\">*</span></label>\n                                        <input type=\"text\" className=\"form-control\" value={user} onChange={e => setUserName(e.currentTarget.value)} required/>\n                                    </div>\n                                    <div className=\"default-form-box\">\n                                        <label>Email<span className=\"text-danger\">*</span></label>\n                                        <input type=\"email\" className=\"form-control\" value={email} onChange={e => setEmail(e.currentTarget.value)} required/>\n                                    </div>\n                                    <div className=\"default-form-box\">\n                                        <label>Şifre<span className=\"text-danger\">*</span></label>\n                                        <input type=\"password\" className=\"form-control\" value={pass} onChange={e => setPass(e.currentTarget.value)} required minLength=\"6\"/>\n                                    </div>\n                                    <div className=\"login_submit\">\n                                        <button \n                                            className=\"theme-btn-one btn-black-overlay btn_md\" \n                                            type=\"submit\"\n                                            disabled={loading}\n                                        >\n                                            {loading ? 'Kaydediliyor...' : 'Kayıt Ol'}\n                                        </button>\n                                    </div>\n                                    <Link to=\"/login\" className=\"active\">Zaten hesabınız var mı? Giriş Yap</Link>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        </>\n    )\n}\n\nexport default RegisterArea\n","import React from 'react'\nimport Header from '../component/Common/Header'\nimport RegisterArea from '../component/Register'\nimport Footer from '../component/Common/Footer'\n\nconst Register = () => {\n    return (\n        <>\n            <Header />\n            <RegisterArea />\n            <Footer />\n        </>\n    )\n}\n\nexport default Register"],"sourceRoot":""}