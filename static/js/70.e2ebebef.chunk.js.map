{"version":3,"sources":["component/Login/index.js","page/login.js"],"names":["LoginArea","dispatch","useDispatch","history","useHistory","status","useSelector","state","user","storedUser","email","setEmail","useState","pass","setPass","loading","setLoading","_jsx","_Fragment","children","id","className","_jsxs","onSubmit","e","preventDefault","async","Swal","fire","icon","title","name","html","then","result","isConfirmed","push","text","userCredential","auth","signInWithEmailAndPassword","uid","nameToUse","docRef","db","collection","doc","docSnap","get","exists","data","displayName","console","warn","register","timer","showConfirmButton","setTimeout","error","errorMessage","code","message","login","type","required","value","onChange","currentTarget","minLength","disabled","htmlFor","Link","to","Login","Header","Footer"],"mappings":"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","file":"static/js/70.e2ebebef.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Swal from 'sweetalert2';\nimport { auth, db } from '../../firebaseConfig'\nimport { register } from '../../app/slices/user'\n\nconst LoginArea = () => {\n    let dispatch = useDispatch();\n    const history = useHistory()\n\n    let status = useSelector((state) => state.user.status);\n    let storedUser = useSelector((state) => state.user.user);\n    const [email, setEmail] = useState('')\n    const [pass, setPass] = useState('')\n    const [loading, setLoading] = useState(false)\n\n    // Login\n    const login = async () => {\n        if(status){\n            Swal.fire({\n                icon: 'question',\n                title: 'Sayın ' + storedUser.name,\n                html:\n                    'Zaten giriş yapmışsınız <br />' +\n                    '<b>Hesabım</b> sayfasına gidebilir veya <b>Alışveriş</b> yapabilirsiniz',\n            }).then((result) => {\n                if(result.isConfirmed) {\n                  history.push('/my-account')\n                }\n              });\n        }else{\n            if(!email || !pass){\n                Swal.fire({\n                    icon: 'warning',\n                    title: 'Eksik Bilgi',\n                    text: 'Lütfen email ve şifre girin'\n                })\n                return\n            }\n\n            setLoading(true)\n            try{\n                const userCredential = await auth.signInWithEmailAndPassword(email, pass)\n                const uid = userCredential.user.uid\n\n                // Firestore'dan kullanıcı bilgilerini al\n                let nameToUse = 'Müşteri'\n                try {\n                    const docRef = db.collection('users').doc(uid)\n                    const docSnap = await docRef.get()\n                    if(docSnap.exists){\n                        const data = docSnap.data()\n                        nameToUse = data.name || userCredential.user.displayName || 'Müşteri'\n                    } else {\n                        nameToUse = userCredential.user.displayName || 'Müşteri'\n                    }\n                } catch(e) {\n                    console.warn('Firestore read failed:', e)\n                    nameToUse = userCredential.user.displayName || 'Müşteri'\n                }\n\n                // Redux store'u güncelle\n                dispatch(register({ user: nameToUse, email: email, pass: pass }))\n                setLoading(false)\n\n                Swal.fire({\n                    icon: 'success',\n                    title: 'Giriş Başarılı!',\n                    text: 'Hoş geldiniz ' + nameToUse,\n                    timer: 1500,\n                    showConfirmButton: false\n                })\n                \n                setTimeout(() => {\n                    history.push(\"/\");\n                }, 100)\n            } catch(error){\n                setLoading(false)\n                console.error('Login error:', error)\n                let errorMessage = 'Bir hata oluştu. Lütfen tekrar deneyin.'\n                \n                if(error.code === 'auth/user-not-found'){\n                    errorMessage = 'Bu email adresi ile kayıtlı kullanıcı bulunamadı.'\n                } else if(error.code === 'auth/wrong-password'){\n                    errorMessage = 'Şifre yanlış.'\n                } else if(error.code === 'auth/invalid-email'){\n                    errorMessage = 'Geçersiz email adresi.'\n                } else if(error.message){\n                    errorMessage = error.message\n                }\n\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Giriş Başarısız',\n                    text: errorMessage\n                })\n            }\n        }\n    }\n\n    return (\n        <>\n            <section id=\"login_area\" className=\"ptb-100\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-lg-6 offset-lg-3 col-md-12 col-sm-12 col-12\">\n                            <div className=\"account_form\">\n                                <h3>Giriş Yap</h3>\n                                <form onSubmit={(e)=>{e.preventDefault();login()}}>\n                                    <div className=\"default-form-box\">\n                                        <label>Email<span className=\"text-danger\">*</span></label>\n                                        <input type=\"email\" className=\"form-control\" required value={email} onChange={e => setEmail(e.currentTarget.value)} />\n                                    </div>\n                                    <div className=\"default-form-box\">\n                                        <label>Şifre<span className=\"text-danger\">*</span></label>\n                                        <input type=\"password\" className=\"form-control\" required value={pass} onChange={e => setPass(e.currentTarget.value)} minLength=\"6\"/>\n                                    </div>\n                                    <div className=\"login_submit\">\n                                        <button \n                                            className=\"theme-btn-one btn-black-overlay btn_md\" \n                                            type=\"submit\"\n                                            disabled={loading}\n                                        >\n                                            {loading ? 'Giriş yapılıyor...' : 'Giriş Yap'}\n                                        </button>\n                                    </div>\n                                    <div className=\"remember_area\">\n                                        <div className=\"form-check\">\n                                            <input type=\"checkbox\" className=\"form-check-input\" id=\"materialUnchecked\"/>\n                                            <label className=\"form-check-label\" htmlFor=\"materialUnchecked\">Beni Hatırla</label>\n                                        </div>\n                                    </div>\n                                    <Link to=\"/register\" className=\"active\">Hesabınız yok mu? Kayıt Ol</Link>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        </>\n    )\n}\n\nexport default LoginArea\n","import React from 'react'\nimport Header from '../component/Common/Header'\nimport LoginArea from '../component/Login'\nimport Footer from '../component/Common/Footer'\n\nconst Login = () => {\n    return (\n        <>\n            <Header />\n            <LoginArea />\n            <Footer />\n        </>\n    )\n}\n\nexport default Login"],"sourceRoot":""}